<!-- Modern Sidebar - Hover to Expand -->
<aside id="sidebar" 
       class="group fixed left-0 top-0 h-screen w-24 hover:w-72 bg-white border-r border-gray-200 shadow-lg z-50 overflow-y-auto overflow-x-hidden transition-all duration-300 ease-in-out">
    
    <!-- Header -->
    <div class="h-20 flex items-center justify-center border-b border-gray-200 bg-gradient-to-r from-gray-50 to-white">
        <!-- Collapsed logo -->
        <div class="group-hover:hidden flex items-center justify-center">
            <div class="w-14 h-14 rounded-xl bg-gradient-to-br from-slate-700 to-slate-800 flex items-center justify-center shadow-lg">
                <span class="text-2xl font-bold text-blue">PA</span>
            </div>
        </div>
        <!-- Expanded logo -->
        <div class="hidden group-hover:flex items-center px-4 w-full">
            <div class="w-12 h-12 rounded-lg bg-gradient-to-br from-slate-700 to-slate-800 flex items-center justify-center shadow-md flex-shrink-0">
                <span class="text-xl font-bold text-blue">PA</span>
            </div>
            <span class="ml-3 text-lg font-bold tracking-wide text-gray-800 whitespace-nowrap">Pazar Atlasi</span>
        </div>
    </div>

    <!-- Navigation -->
    <nav class="py-4">
        <ul class="space-y-1">
            
            <!-- Dashboard -->
            <li class="mx-2">
                <a href="/Home/Index" 
                   class="flex items-center h-12 rounded-lg text-gray-700 hover:text-gray-900 hover:bg-gray-100 transition-all duration-200 group/item">
                    <div class="w-24 flex items-center justify-center flex-shrink-0">
                        <i class="fas fa-tachometer-alt text-xl text-gray-600"></i>
                    </div>
                    <span class="font-medium text-base whitespace-nowrap opacity-0 group-hover:opacity-100 transition-opacity duration-200">@Html.L("Navigation.Dashboard")</span>
                </a>
            </li>

            <!-- Announcements -->
            <li class="mx-2">
                <a href="@Url.Action("Index", "Announcement")" 
                   class="flex items-center h-12 rounded-lg text-gray-700 hover:text-gray-900 hover:bg-gray-100 transition-all duration-200 group/item">
                    <div class="w-24 flex items-center justify-center flex-shrink-0">
                        <i class="fas fa-bullhorn text-xl text-gray-600"></i>
                    </div>
                    <span class="font-medium text-base whitespace-nowrap opacity-0 group-hover:opacity-100 transition-opacity duration-200">@Html.L("Navigation.Announcements")</span>
                </a>
            </li>

            <!-- Campaigns -->
            <li class="mx-2">
                <a href="@Url.Action("Index", "Campaigns")" 
                   class="flex items-center h-12 rounded-lg text-gray-700 hover:text-gray-900 hover:bg-gray-100 transition-all duration-200 group/item">
                    <div class="w-24 flex items-center justify-center flex-shrink-0">
                        <i class="fas fa-ad text-xl text-gray-600"></i>
                    </div>
                    <span class="font-medium text-base whitespace-nowrap opacity-0 group-hover:opacity-100 transition-opacity duration-200">@Html.L("Navigation.Campaigns")</span>
                </a>
            </li>

            <!-- Content (with submenu) -->
            <li class="relative sidebar-item mx-2" data-menu="content">
                <button onclick="toggleSubmenu(this)" 
                        class="w-full flex items-center h-12 rounded-lg text-gray-700 hover:text-gray-900 hover:bg-gray-100 transition-all duration-200 group/item">
                    <div class="w-24 flex items-center justify-center flex-shrink-0">
                        <i class="fas fa-file-alt text-xl text-gray-600"></i>
                    </div>
                    <span class="flex-1 text-left font-medium text-base whitespace-nowrap opacity-0 group-hover:opacity-100 transition-opacity duration-200">@Html.L("Navigation.Content")</span>
                    <i class="fas fa-chevron-right text-sm submenu-icon text-gray-400 transition-transform duration-200 opacity-0 group-hover:opacity-100 mr-4"></i>
                </button>
                <ul class="hidden mt-1 ml-9 space-y-0.5 submenu bg-gray-50 rounded-lg p-2">
                    <li><a href="/Content/Pages" 
                           class="flex items-center h-9 px-3 text-sm rounded-md text-gray-600 hover:text-gray-900 hover:bg-gray-200 transition-all duration-200">
                        <i class="fas fa-list w-5 text-center text-xs text-gray-500"></i>
                        <span class="ml-2 whitespace-nowrap">@Html.L("Navigation.Pages")</span>
                    </a></li>
                    <li><a href="/Content/Sections" 
                           class="flex items-center h-9 px-3 text-sm rounded-md text-gray-600 hover:text-gray-900 hover:bg-gray-200 transition-all duration-200">
                        <i class="fas fa-layer-group w-5 text-center text-xs text-gray-500"></i>
                        <span class="ml-2 whitespace-nowrap">@Html.L("Navigation.Sections")</span>
                    </a></li>
                    <li><a href="/Content/Layouts" 
                           class="flex items-center h-9 px-3 text-sm rounded-md text-gray-600 hover:text-gray-900 hover:bg-gray-200 transition-all duration-200">
                        <i class="fas fa-th-large w-5 text-center text-xs text-gray-500"></i>
                        <span class="ml-2 whitespace-nowrap">@Html.L("Navigation.Layouts")</span>
                    </a></li>
                    <li><a href="/Content/WebUrl" 
                           class="flex items-center h-9 px-3 text-sm rounded-md text-gray-600 hover:text-gray-900 hover:bg-gray-200 transition-all duration-200">
                        <i class="fas fa-link w-5 text-center text-xs text-gray-500"></i>
                        <span class="ml-2 whitespace-nowrap">@Html.L("Navigation.WebUrlManagement")</span>
                    </a></li>
                    <li><a href="#" 
                           class="flex items-center h-9 px-3 text-sm rounded-md text-gray-600 hover:text-gray-900 hover:bg-gray-200 transition-all duration-200">
                        <i class="fas fa-newspaper w-5 text-center text-xs text-gray-500"></i>
                        <span class="ml-2 whitespace-nowrap">@Html.L("Navigation.News")</span>
                    </a></li>
                    <li><a href="@Url.Action("Index", "Blog")" 
                           class="flex items-center h-9 px-3 text-sm rounded-md text-gray-600 hover:text-gray-900 hover:bg-gray-200 transition-all duration-200">
                        <i class="fas fa-blog w-5 text-center text-xs text-gray-500"></i>
                        <span class="ml-2 whitespace-nowrap">@Html.L("Navigation.Blog")</span>
                    </a></li>
                    <li><a href="@Url.Action("Template", "Content")" 
                           class="flex items-center h-9 px-3 text-sm rounded-md text-gray-600 hover:text-gray-900 hover:bg-gray-200 transition-all duration-200">
                        <i class="fas fa-layer-group w-5 text-center text-xs text-gray-500"></i>
                        <span class="ml-2 whitespace-nowrap">@Html.L("Navigation.Templates")</span>
                    </a></li>
                    <li><a href="@Url.Action("SectionItems", "Content")" 
                           class="flex items-center h-9 px-3 text-sm rounded-md text-gray-600 hover:text-gray-900 hover:bg-gray-200 transition-all duration-200">
                        <i class="fas fa-list-ul w-5 text-center text-xs text-gray-500"></i>
                        <span class="ml-2 whitespace-nowrap">@Html.L("Navigation.SectionItems")</span>
                    </a></li>
                </ul>
            </li>

            <!-- Product Management (with submenu) -->
            <li class="relative sidebar-item mx-2" data-menu="metadata">
                <button onclick="toggleSubmenu(this)" 
                        class="w-full flex items-center h-12 rounded-lg text-gray-700 hover:text-gray-900 hover:bg-gray-100 transition-all duration-200 group/item">
                    <div class="w-24 flex items-center justify-center flex-shrink-0">
                        <i class="fas fa-box text-xl text-gray-600"></i>
                    </div>
                    <span class="flex-1 text-left font-medium text-base whitespace-nowrap opacity-0 group-hover:opacity-100 transition-opacity duration-200">@Html.L("Navigation.ProductManagement")</span>
                    <i class="fas fa-chevron-right text-sm submenu-icon text-gray-400 transition-transform duration-200 opacity-0 group-hover:opacity-100 mr-4"></i>
                </button>
                <ul class="hidden mt-1 ml-9 space-y-0.5 submenu bg-gray-50 rounded-lg p-2">
                    <li><a href="@Url.Action("Products", "Metadata")" 
                           class="flex items-center h-9 px-3 text-sm rounded-md text-gray-600 hover:text-gray-900 hover:bg-gray-200 transition-all duration-200">
                        <i class="fas fa-box w-5 text-center text-xs text-gray-500"></i>
                        <span class="ml-2 whitespace-nowrap">@Html.L("Navigation.Products")</span>
                    </a></li>
                    <li><a href="@Url.Action("Variants", "Metadata")" 
                           class="flex items-center h-9 px-3 text-sm rounded-md text-gray-600 hover:text-gray-900 hover:bg-gray-200 transition-all duration-200">
                        <i class="fas fa-layer-group w-5 text-center text-xs text-gray-500"></i>
                        <span class="ml-2 whitespace-nowrap">@Html.L("Navigation.Variants")</span>
                    </a></li>
                    <li><a href="@Url.Action("Categories", "Metadata")" 
                           class="flex items-center h-9 px-3 text-sm rounded-md text-gray-600 hover:text-gray-900 hover:bg-gray-200 transition-all duration-200">
                        <i class="fas fa-tags w-5 text-center text-xs text-gray-500"></i>
                        <span class="ml-2 whitespace-nowrap">@Html.L("Navigation.Categories")</span>
                    </a></li>
                    <li><a href="@Url.Action("Trademarks", "Metadata")" 
                           class="flex items-center h-9 px-3 text-sm rounded-md text-gray-600 hover:text-gray-900 hover:bg-gray-200 transition-all duration-200">
                        <i class="fas fa-trademark w-5 text-center text-xs text-gray-500"></i>
                        <span class="ml-2 whitespace-nowrap">@Html.L("Navigation.Trademarks")</span>
                    </a></li>
                    <li><a href="@Url.Action("DataSchemas", "Metadata")" 
                           class="flex items-center h-9 px-3 text-sm rounded-md text-gray-600 hover:text-gray-900 hover:bg-gray-200 transition-all duration-200">
                        <i class="fas fa-database w-5 text-center text-xs text-gray-500"></i>
                        <span class="ml-2 whitespace-nowrap">Şema Yönetimi</span>
                    </a></li>
                </ul>
            </li>

            <!-- E-Commerce (with submenu) -->
            <li class="relative sidebar-item mx-2" data-menu="ecommerce">
                <button onclick="toggleSubmenu(this)" 
                        class="w-full flex items-center h-12 rounded-lg text-gray-700 hover:text-gray-900 hover:bg-gray-100 transition-all duration-200 group/item">
                    <div class="w-24 flex items-center justify-center flex-shrink-0">
                        <i class="fas fa-shopping-cart text-xl text-gray-600"></i>
                    </div>
                    <span class="flex-1 text-left font-medium text-base whitespace-nowrap opacity-0 group-hover:opacity-100 transition-opacity duration-200">@Html.L("Navigation.ECommerce")</span>
                    <i class="fas fa-chevron-right text-sm submenu-icon text-gray-400 transition-transform duration-200 opacity-0 group-hover:opacity-100 mr-4"></i>
                </button>
                <ul class="hidden mt-1 ml-9 space-y-0.5 submenu bg-gray-50 rounded-lg p-2">
                    <li><a href="#" 
                           class="flex items-center h-9 px-3 text-sm rounded-md text-gray-600 hover:text-gray-900 hover:bg-gray-200 transition-all duration-200">
                        <i class="fas fa-receipt w-5 text-center text-xs text-gray-500"></i>
                        <span class="ml-2 whitespace-nowrap">@Html.L("Navigation.Orders")</span>
                    </a></li>
                    <li><a href="#" 
                           class="flex items-center h-9 px-3 text-sm rounded-md text-gray-600 hover:text-gray-900 hover:bg-gray-200 transition-all duration-200">
                        <i class="fas fa-shopping-basket w-5 text-center text-xs text-gray-500"></i>
                        <span class="ml-2 whitespace-nowrap">@Html.L("Navigation.Cart")</span>
                    </a></li>
                    <li><a href="#" 
                           class="flex items-center h-9 px-3 text-sm rounded-md text-gray-600 hover:text-gray-900 hover:bg-gray-200 transition-all duration-200">
                        <i class="fas fa-credit-card w-5 text-center text-xs text-gray-500"></i>
                        <span class="ml-2 whitespace-nowrap">@Html.L("Navigation.Payments")</span>
                    </a></li>
                </ul>
            </li>

            <!-- Users (with submenu) -->
            <li class="relative sidebar-item mx-2" data-menu="users">
                <button onclick="toggleSubmenu(this)" 
                        class="w-full flex items-center h-12 rounded-lg text-gray-700 hover:text-gray-900 hover:bg-gray-100 transition-all duration-200 group/item">
                    <div class="w-24 flex items-center justify-center flex-shrink-0">
                        <i class="fas fa-users text-xl text-gray-600"></i>
                    </div>
                    <span class="flex-1 text-left font-medium text-base whitespace-nowrap opacity-0 group-hover:opacity-100 transition-opacity duration-200">@Html.L("Navigation.Users")</span>
                    <i class="fas fa-chevron-right text-sm submenu-icon text-gray-400 transition-transform duration-200 opacity-0 group-hover:opacity-100 mr-4"></i>
                </button>
                <ul class="hidden mt-1 ml-9 space-y-0.5 submenu bg-gray-50 rounded-lg p-2">
                    <li><a href="@Url.Action("Index", "Users")" 
                           class="flex items-center h-9 px-3 text-sm rounded-md text-gray-600 hover:text-gray-900 hover:bg-gray-200 transition-all duration-200">
                        <i class="fas fa-user-plus w-5 text-center text-xs text-gray-500"></i>
                        <span class="ml-2 whitespace-nowrap">@Html.L("Navigation.ManageUsers")</span>
                    </a></li>
                    <li><a href="@Url.Action("Index", "Roles")" 
                           class="flex items-center h-9 px-3 text-sm rounded-md text-gray-600 hover:text-gray-900 hover:bg-gray-200 transition-all duration-200">
                        <i class="fas fa-user-shield w-5 text-center text-xs text-gray-500"></i>
                        <span class="ml-2 whitespace-nowrap">@Html.L("Navigation.ManageRoles")</span>
                    </a></li>
                    <li><a href="@Url.Action("Index", "Permissions")" 
                           class="flex items-center h-9 px-3 text-sm rounded-md text-gray-600 hover:text-gray-900 hover:bg-gray-200 transition-all duration-200">
                        <i class="fas fa-user-cog w-5 text-center text-xs text-gray-500"></i>
                        <span class="ml-2 whitespace-nowrap">@Html.L("Navigation.ManagePermissions")</span>
                    </a></li>
                </ul>
            </li>

            <!-- Analytics -->
            <li class="mx-2">
                <a href="#" 
                   class="flex items-center h-12 rounded-lg text-gray-700 hover:text-gray-900 hover:bg-gray-100 transition-all duration-200 group/item">
                    <div class="w-24 flex items-center justify-center flex-shrink-0">
                        <i class="fas fa-chart-line text-xl text-gray-600"></i>
                    </div>
                    <span class="font-medium text-base whitespace-nowrap opacity-0 group-hover:opacity-100 transition-opacity duration-200">@Html.L("Navigation.Analytics")</span>
                </a>
            </li>

            <!-- Settings (with submenu) -->
            <li class="relative sidebar-item mx-2" data-menu="settings">
                <button onclick="toggleSubmenu(this)" 
                        class="w-full flex items-center h-12 rounded-lg text-gray-700 hover:text-gray-900 hover:bg-gray-100 transition-all duration-200 group/item">
                    <div class="w-24 flex items-center justify-center flex-shrink-0">
                        <i class="fas fa-cog text-xl text-gray-600"></i>
                    </div>
                    <span class="flex-1 text-left font-medium text-base whitespace-nowrap opacity-0 group-hover:opacity-100 transition-opacity duration-200">@Html.L("Navigation.Settings")</span>
                    <i class="fas fa-chevron-right text-sm submenu-icon text-gray-400 transition-transform duration-200 opacity-0 group-hover:opacity-100 mr-4"></i>
                </button>
                <ul class="hidden mt-1 ml-9 space-y-0.5 submenu bg-gray-50 rounded-lg p-2">
                    <li><a href="@Url.Action("Index", "Settings")" 
                           class="flex items-center h-9 px-3 text-sm rounded-md text-gray-600 hover:text-gray-900 hover:bg-gray-200 transition-all duration-200">
                        <i class="fas fa-cogs w-5 text-center text-xs text-gray-500"></i>
                        <span class="ml-2 whitespace-nowrap">@Html.L("Navigation.GeneralSettings")</span>
                    </a></li>
                    <li><a href="@Url.Action("Countries", "Settings")" 
                           class="flex items-center h-9 px-3 text-sm rounded-md text-gray-600 hover:text-gray-900 hover:bg-gray-200 transition-all duration-200">
                        <i class="fas fa-globe w-5 text-center text-xs text-gray-500"></i>
                        <span class="ml-2 whitespace-nowrap">@Html.L("Navigation.Countries")</span>
                    </a></li>
                    <li><a href="@Url.Action("Languages", "Settings")" 
                           class="flex items-center h-9 px-3 text-sm rounded-md text-gray-600 hover:text-gray-900 hover:bg-gray-200 transition-all duration-200">
                        <i class="fas fa-language w-5 text-center text-xs text-gray-500"></i>
                        <span class="ml-2 whitespace-nowrap">@Html.L("Navigation.Languages")</span>
                    </a></li>
                    <li><a href="@Url.Action("Localization", "Settings")" 
                           class="flex items-center h-9 px-3 text-sm rounded-md text-gray-600 hover:text-gray-900 hover:bg-gray-200 transition-all duration-200">
                        <i class="fas fa-globe-americas w-5 text-center text-xs text-gray-500"></i>
                        <span class="ml-2 whitespace-nowrap">@Html.L("Navigation.Localization")</span>
                    </a></li>
                </ul>
            </li>

        </ul>
    </nav>
</aside>

<style>
/* Custom scrollbar */
#sidebar::-webkit-scrollbar {
    width: 6px;
}

#sidebar::-webkit-scrollbar-track {
    background: #f3f4f6;
}

#sidebar::-webkit-scrollbar-thumb {
    background: #d1d5db;
    border-radius: 10px;
}

#sidebar::-webkit-scrollbar-thumb:hover {
    background: #9ca3af;
}

/* Submenu animations */
.submenu {
    max-height: 0;
    overflow: hidden;
    transition: max-height 0.3s ease-out;
}

.submenu:not(.hidden) {
    max-height: 600px;
}

button.active .submenu-icon {
    transform: rotate(90deg);
}

/* Active menu item styles */
.sidebar-item.active > button,
.sidebar-item.active > a {
    background-color: #f3f4f6;
    color: #111827;
    font-weight: 600;
}

.submenu a.active {
    background-color: #e5e7eb;
    color: #111827;
    font-weight: 600;
}
</style>

<script>
// Submenu toggle - only works when sidebar is hovered
function toggleSubmenu(button) {
    const sidebar = document.getElementById('sidebar');
    if (!sidebar.matches(':hover')) return;
    
    const submenu = button.nextElementSibling;
    const icon = button.querySelector('.submenu-icon');
    
    // Close other submenus
    document.querySelectorAll('.submenu:not(.hidden)').forEach(other => {
        if (other !== submenu) {
            other.classList.add('hidden');
            const otherButton = other.previousElementSibling;
            otherButton.classList.remove('active');
            otherButton.querySelector('.submenu-icon').style.transform = 'rotate(0deg)';
        }
    });
    
    // Toggle current submenu
    if (submenu.classList.contains('hidden')) {
        submenu.classList.remove('hidden');
        icon.style.transform = 'rotate(90deg)';
        button.classList.add('active');
    } else {
        submenu.classList.add('hidden');
        icon.style.transform = 'rotate(0deg)';
        button.classList.remove('active');
    }
}

// Close all submenus when mouse leaves sidebar
document.getElementById('sidebar').addEventListener('mouseleave', function() {
    document.querySelectorAll('.submenu').forEach(submenu => {
        submenu.classList.add('hidden');
    });
    document.querySelectorAll('button[onclick*="toggleSubmenu"]').forEach(btn => {
        btn.classList.remove('active');
        const icon = btn.querySelector('.submenu-icon');
        if (icon) icon.style.transform = 'rotate(0deg)';
    });
});

// Set active menu based on current URL - only when sidebar is hovered
document.addEventListener('DOMContentLoaded', function() {
    const currentPath = window.location.pathname.toLowerCase();
    const sidebar = document.getElementById('sidebar');
    let activeParentItem = null;
    
    // Check all submenu links
    document.querySelectorAll('.submenu a').forEach(link => {
        const href = link.getAttribute('href');
        if (href && href !== '#' && currentPath.includes(href.toLowerCase())) {
            // Mark link as active
            link.classList.add('active');
            
            // Find parent menu item
            const parentItem = link.closest('.sidebar-item');
            if (parentItem) {
                activeParentItem = parentItem;
                parentItem.classList.add('active');
            }
        }
    });
    
    // Check main menu links
    document.querySelectorAll('nav > ul > li > a').forEach(link => {
        const href = link.getAttribute('href');
        if (href && href !== '#' && currentPath.includes(href.toLowerCase())) {
            link.classList.add('active');
        }
    });
    
    // Open active submenu only when sidebar is hovered
    if (activeParentItem) {
        sidebar.addEventListener('mouseenter', function openActiveSubmenu() {
            const submenu = activeParentItem.querySelector('.submenu');
            const button = activeParentItem.querySelector('button');
            const icon = button ? button.querySelector('.submenu-icon') : null;
            
            if (submenu && submenu.classList.contains('hidden')) {
                submenu.classList.remove('hidden');
                if (icon) icon.style.transform = 'rotate(90deg)';
                if (button) button.classList.add('active');
            }
        });
    }
});
</script>
