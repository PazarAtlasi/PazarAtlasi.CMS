@model PazarAtlasi.CMS.Models.ViewModels.SectionViewModel

<div class="bg-white rounded-lg w-full max-w-4xl max-h-[90vh] overflow-y-auto">
    <div class="sticky top-0 bg-white border-b border-slate-200 px-6 py-4 flex items-center justify-between z-10">
        <h3 class="text-lg font-semibold text-slate-800">
            @(Model.Id > 0 ? "Edit" : "Add") Section
        </h3>
        <button type="button" onclick="SectionModal.close()" class="text-slate-400 hover:text-slate-600">
            <i class="fas fa-times text-xl"></i>
        </button>
    </div>

    <div class="p-6 space-y-6">
        <!-- Page Selection -->
        <div>
            <label class="block text-sm font-medium text-slate-700 mb-2">Page</label>
            <select id="modalPageId" class="w-full px-3 py-2 border border-slate-300 rounded-lg" 
                    onchange="SectionModal.handlePageChange(this.value)">
                <option value="">Select a page...</option>
            </select>
        </div>

        <!-- Section Type Selection -->
        <div>
            <label class="block text-sm font-medium text-slate-700 mb-2">Section Type</label>
            <select id="modalSectionType" class="w-full px-3 py-2 border border-slate-300 rounded-lg"
                    onchange="SectionModal.handleSectionTypeChange(this.value)">
                @foreach (var sectionType in Enum.GetValues<PazarAtlasi.CMS.Domain.Common.SectionType>())
                {
                    <!option value="@((int)sectionType)" @(Model.Type == sectionType ? "selected" : "")>
                        @sectionType.ToString()
                    </!option>
                }
            </select>
        </div>

        <!-- Template Selection (will be populated dynamically) -->
        <div id="templateSelectionContainer" class="hidden">
            <label class="block text-sm font-medium text-slate-700 mb-2">Template</label>
            <div id="templateGrid">
                <!-- Templates will be loaded here via AJAX -->
            </div>
        </div>

        <!-- Template Configuration (will be populated based on selected template) -->
        <div id="templateConfigContainer" class="hidden">
            <h4 class="text-sm font-medium text-slate-700 mb-3">Template Configuration</h4>
            <div id="templateConfigFields">
                <!-- Dynamic fields based on template schema -->
            </div>
        </div>

        <!-- Section Status -->
        <div>
            <label class="block text-sm font-medium text-slate-700 mb-2">Status</label>
            <select id="modalSectionStatus" class="w-full px-3 py-2 border border-slate-300 rounded-lg">
                @foreach (var status in Enum.GetValues<PazarAtlasi.CMS.Domain.Common.Status>())
                {
                    @if (status != PazarAtlasi.CMS.Domain.Common.Status.Deleted)
                    {
                        <!option value="@((int)status)" @(Model.Status == status ? "selected" : "")>
                            @status.ToString()
                        </!option>
                    }
                }
            </select>
        </div>
    </div>

    <div class="sticky bottom-0 bg-slate-50 border-t border-slate-200 px-6 py-4 flex items-center justify-end space-x-3">
        <button type="button" onclick="SectionModal.close()" 
                class="px-4 py-2 bg-slate-200 hover:bg-slate-300 text-slate-700 rounded-lg transition-colors">
            Cancel
        </button>
        <button type="button" onclick="SectionModal.save()" 
                class="px-4 py-2 bg-purple-600 hover:bg-purple-700 text-white rounded-lg transition-colors">
            Save Section
        </button>
    </div>
</div>
