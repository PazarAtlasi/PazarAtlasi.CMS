@{
    ViewData["Title"] = "Menu Item Editor";
}

<div class="menu-item-editor">
    <div class="flex flex-wrap items-center mb-8">
        <div class="w-full lg:w-2/3 mb-4 lg:mb-0">
            <div class="page-title-box">
                <a href="@Url.Action("Index", "Content")"
                    class="text-slate-600 hover:text-purple-700 mb-2 inline-block">
                    <i class="fas fa-arrow-left mr-1"></i> Back to Menu Designer
                </a>
                <h4
                    class="text-2xl font-bold text-slate-800 relative inline-block after:content-[''] after:absolute after:bottom-[-8px] after:left-0 after:w-10 after:h-[3px] after:bg-purple-800 after:rounded-full">
                    Menu Item Editor
                </h4>
                <p class="text-slate-500 mt-3 max-w-xl">Configure menu items and their content structures.</p>
            </div>
        </div>
        <div class="w-full lg:w-1/3 text-left lg:text-right">
            <div class="inline-flex items-center space-x-2">
                <button id="previewMenuBtn"
                    class="py-2 px-4 bg-slate-700 hover:bg-slate-600 text-white rounded-lg text-sm transition-colors inline-flex items-center shadow-sm">
                    <i class="fas fa-eye mr-2"></i> Preview
                </button>
                <button id="saveMenuBtn"
                    class="py-2 px-4 bg-purple-800 hover:bg-purple-700 text-white rounded-lg text-sm transition-colors inline-flex items-center shadow-sm">
                    <i class="fas fa-save mr-2"></i> Save Menu
                </button>
            </div>
        </div>
    </div>

    <div class="grid grid-cols-1 lg:grid-cols-12 gap-6 mb-8">
        <!-- Left Column: Basic Menu Configuration -->
        <div class="lg:col-span-4">
            <div class="bg-white rounded-xl shadow-md mb-6">
                <div class="p-5 border-b border-slate-100">
                    <h5 class="text-lg font-semibold text-slate-800 m-0">Basic Information</h5>
                    <p class="text-sm text-slate-500 mt-1">Configure the menu item details</p>
                </div>
                <div class="p-6">
                    <form id="menuItemForm">
                        <div class="mb-4">
                            <label for="webUrlId" class="block text-sm font-medium text-slate-700 mb-1">WebUrl
                                ID</label>
                            <input type="text" id="webUrlId" name="webUrlId"
                                class="w-full border-slate-300 focus:border-purple-500 focus:ring-purple-500 rounded-md shadow-sm text-sm"
                                placeholder="e.g., about, services, blog">
                            <p class="text-xs text-slate-500 mt-1">Unique identifier for the menu item</p>
                        </div>
                        <div class="mb-4">
                            <label for="label" class="block text-sm font-medium text-slate-700 mb-1">Label</label>
                            <input type="text" id="label" name="label"
                                class="w-full border-slate-300 focus:border-purple-500 focus:ring-purple-500 rounded-md shadow-sm text-sm"
                                placeholder="e.g., About Us, Services">
                        </div>
                        <div class="mb-4">
                            <label for="menuType" class="block text-sm font-medium text-slate-700 mb-1">Menu
                                Type</label>
                            <select id="menuType" name="type"
                                class="w-full border-slate-300 focus:border-purple-500 focus:ring-purple-500 rounded-md shadow-sm text-sm">
                                <option value="">Select a type...</option>
                                <option value="MegaMenu">Mega Menu</option>
                                <option value="ServiceTabs">Service Tabs</option>
                                <option value="Categorized">Categorized</option>
                                <option value="Link">Link</option>
                                <option value="Dropdown">Dropdown</option>
                            </select>
                        </div>
                        <div class="mb-4">
                            <label for="parentId" class="block text-sm font-medium text-slate-700 mb-1">Parent Menu
                                (Optional)</label>
                            <select id="parentId" name="parentId"
                                class="w-full border-slate-300 focus:border-purple-500 focus:ring-purple-500 rounded-md shadow-sm text-sm">
                                <option value="">No parent (top level)</option>
                                <option value="1">About Us</option>
                                <option value="2">Services</option>
                            </select>
                        </div>
                        <div class="mb-4">
                            <label for="displayOrder" class="block text-sm font-medium text-slate-700 mb-1">Display
                                Order</label>
                            <input type="number" id="displayOrder" name="displayOrder"
                                class="w-full border-slate-300 focus:border-purple-500 focus:ring-purple-500 rounded-md shadow-sm text-sm"
                                value="0">
                        </div>
                        <div class="mb-4">
                            <label for="url" class="block text-sm font-medium text-slate-700 mb-1">URL
                                (Optional)</label>
                            <input type="text" id="url" name="url"
                                class="w-full border-slate-300 focus:border-purple-500 focus:ring-purple-500 rounded-md shadow-sm text-sm"
                                placeholder="e.g., /about, /services">
                        </div>
                        <div class="mb-4">
                            <label for="translationKey"
                                class="block text-sm font-medium text-slate-700 mb-1">Translation Key (Optional)</label>
                            <input type="text" id="translationKey" name="translationKey"
                                class="w-full border-slate-300 focus:border-purple-500 focus:ring-purple-500 rounded-md shadow-sm text-sm"
                                placeholder="e.g., navbar.about">
                        </div>
                        <div class="flex space-x-4 mb-4">
                            <div class="flex items-center">
                                <input type="checkbox" id="showStatus" name="showStatus"
                                    class="h-4 w-4 text-purple-600 focus:ring-purple-500 border-slate-300 rounded">
                                <label for="showStatus" class="ml-2 block text-sm text-slate-700">Show Status</label>
                            </div>
                            <div class="flex items-center">
                                <input type="checkbox" id="isActive" name="isActive"
                                    class="h-4 w-4 text-purple-600 focus:ring-purple-500 border-slate-300 rounded"
                                    checked>
                                <label for="isActive" class="ml-2 block text-sm text-slate-700">Active</label>
                            </div>
                        </div>
                        <div id="statusContainer" class="mb-4 hidden">
                            <label for="status" class="block text-sm font-medium text-slate-700 mb-1">Status</label>
                            <select id="status" name="status"
                                class="w-full border-slate-300 focus:border-purple-500 focus:ring-purple-500 rounded-md shadow-sm text-sm">
                                <option value="online">Online</option>
                                <option value="offline">Offline</option>
                                <option value="maintenance">Maintenance</option>
                            </select>
                        </div>
                    </form>
                </div>
            </div>
        </div>

        <!-- Right Column: Content Editor based on type -->
        <div class="lg:col-span-8">
            <div class="bg-white rounded-xl shadow-md mb-6">
                <div class="p-5 border-b border-slate-100">
                    <h5 class="text-lg font-semibold text-slate-800 m-0">Content Configuration</h5>
                    <p class="text-sm text-slate-500 mt-1">Customize the content for your selected menu type</p>
                </div>
                <div class="p-6">
                    <!-- Content editors will be shown based on menu type selection -->
                    <div id="contentEditorPlaceholder"
                        class="text-center p-8 border-2 border-dashed border-slate-200 rounded-lg">
                        <i class="fas fa-hand-point-left text-3xl text-slate-400 mb-3"></i>
                        <p class="text-slate-500">Select a menu type from the left to configure content</p>
                    </div>

                    <!-- MegaMenu Editor (hidden by default) -->
                    <div id="megaMenuEditor" class="hidden">
                        <div class="border border-slate-200 rounded-lg p-4 mb-4">
                            <h6 class="font-medium text-slate-800 mb-3">Description Section</h6>
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-3">
                                <div>
                                    <label class="block text-sm font-medium text-slate-700 mb-1">Title</label>
                                    <input type="text" name="content.description.title"
                                        class="w-full border-slate-300 focus:border-purple-500 focus:ring-purple-500 rounded-md shadow-sm text-sm">
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-slate-700 mb-1">Link Text</label>
                                    <input type="text" name="content.description.linkText"
                                        class="w-full border-slate-300 focus:border-purple-500 focus:ring-purple-500 rounded-md shadow-sm text-sm">
                                </div>
                            </div>
                            <div class="mb-3">
                                <label class="block text-sm font-medium text-slate-700 mb-1">Description Text</label>
                                <textarea name="content.description.text" rows="3"
                                    class="w-full border-slate-300 focus:border-purple-500 focus:ring-purple-500 rounded-md shadow-sm text-sm"></textarea>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-slate-700 mb-1">Link URL</label>
                                <input type="text" name="content.description.linkUrl"
                                    class="w-full border-slate-300 focus:border-purple-500 focus:ring-purple-500 rounded-md shadow-sm text-sm">
                            </div>
                        </div>

                        <div class="border border-slate-200 rounded-lg p-4 mb-4">
                            <div class="flex justify-between items-center mb-3">
                                <h6 class="font-medium text-slate-800">Quick Links Section</h6>
                                <button type="button"
                                    class="p-1 bg-purple-100 hover:bg-purple-200 rounded text-purple-700 text-sm">
                                    <i class="fas fa-plus"></i> Add Link
                                </button>
                            </div>
                            <div class="mb-3">
                                <label class="block text-sm font-medium text-slate-700 mb-1">Section Title</label>
                                <input type="text" name="content.quickLinks.title"
                                    class="w-full border-slate-300 focus:border-purple-500 focus:ring-purple-500 rounded-md shadow-sm text-sm">
                            </div>
                            <div class="space-y-3" id="quickLinksContainer">
                                <div class="flex items-center space-x-2">
                                    <input type="text" placeholder="Link Text"
                                        class="flex-1 border-slate-300 focus:border-purple-500 focus:ring-purple-500 rounded-md shadow-sm text-sm">
                                    <input type="text" placeholder="URL"
                                        class="flex-1 border-slate-300 focus:border-purple-500 focus:ring-purple-500 rounded-md shadow-sm text-sm">
                                    <button type="button"
                                        class="p-1 bg-red-100 hover:bg-red-200 rounded text-red-700 text-sm">
                                        <i class="fas fa-trash"></i>
                                    </button>
                                </div>
                            </div>
                        </div>

                        <div class="border border-slate-200 rounded-lg p-4">
                            <div class="flex justify-between items-center mb-3">
                                <h6 class="font-medium text-slate-800">Features Section</h6>
                                <button type="button"
                                    class="p-1 bg-purple-100 hover:bg-purple-200 rounded text-purple-700 text-sm">
                                    <i class="fas fa-plus"></i> Add Feature
                                </button>
                            </div>
                            <div class="mb-3">
                                <label class="block text-sm font-medium text-slate-700 mb-1">Section Title</label>
                                <input type="text" name="content.features.title"
                                    class="w-full border-slate-300 focus:border-purple-500 focus:ring-purple-500 rounded-md shadow-sm text-sm">
                            </div>
                            <div class="space-y-3" id="featuresContainer">
                                <div class="border border-slate-200 rounded p-3">
                                    <div class="grid grid-cols-1 md:grid-cols-2 gap-3">
                                        <div>
                                            <label class="block text-xs font-medium text-slate-700 mb-1">Title</label>
                                            <input type="text"
                                                class="w-full border-slate-300 focus:border-purple-500 focus:ring-purple-500 rounded-md shadow-sm text-sm">
                                        </div>
                                        <div class="text-right md:text-left">
                                            <button type="button"
                                                class="p-1 bg-red-100 hover:bg-red-200 rounded text-red-700 text-sm mt-6">
                                                <i class="fas fa-trash"></i>
                                            </button>
                                        </div>
                                    </div>
                                    <div class="mt-2">
                                        <label class="block text-xs font-medium text-slate-700 mb-1">Description</label>
                                        <textarea rows="2"
                                            class="w-full border-slate-300 focus:border-purple-500 focus:ring-purple-500 rounded-md shadow-sm text-sm"></textarea>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- ServiceTabs Editor (hidden by default) -->
                    <div id="serviceTabsEditor" class="hidden">
                        <div class="border border-slate-200 rounded-lg p-4 mb-4">
                            <div class="flex justify-between items-center mb-3">
                                <h6 class="font-medium text-slate-800">Tabs</h6>
                                <button type="button"
                                    class="p-1 bg-purple-100 hover:bg-purple-200 rounded text-purple-700 text-sm">
                                    <i class="fas fa-plus"></i> Add Tab
                                </button>
                            </div>
                            <div class="space-y-3" id="tabsContainer">
                                <div class="flex items-center space-x-2">
                                    <input type="text" placeholder="Tab ID"
                                        class="w-1/4 border-slate-300 focus:border-purple-500 focus:ring-purple-500 rounded-md shadow-sm text-sm">
                                    <input type="text" placeholder="Tab Label"
                                        class="flex-1 border-slate-300 focus:border-purple-500 focus:ring-purple-500 rounded-md shadow-sm text-sm">
                                    <select
                                        class="w-1/4 border-slate-300 focus:border-purple-500 focus:ring-purple-500 rounded-md shadow-sm text-sm">
                                        <option value="Server">Server</option>
                                        <option value="Cloud">Cloud</option>
                                        <option value="Shield">Shield</option>
                                        <option value="Database">Database</option>
                                    </select>
                                    <button type="button"
                                        class="p-1 bg-red-100 hover:bg-red-200 rounded text-red-700 text-sm">
                                        <i class="fas fa-trash"></i>
                                    </button>
                                </div>
                            </div>
                        </div>

                        <div class="border border-slate-200 rounded-lg p-4">
                            <div class="flex justify-between items-center mb-3">
                                <h6 class="font-medium text-slate-800">Tab Content</h6>
                            </div>
                            <div class="mb-3">
                                <label class="block text-sm font-medium text-slate-700 mb-1">Select Tab to Edit</label>
                                <select id="tabSelector"
                                    class="w-full border-slate-300 focus:border-purple-500 focus:ring-purple-500 rounded-md shadow-sm text-sm">
                                    <option>Select a tab...</option>
                                </select>
                            </div>
                            <div id="tabContentEditor" class="border border-slate-200 rounded p-3 hidden">
                                <div class="flex justify-between items-center mb-3">
                                    <h6 class="font-medium text-slate-700">Content Items</h6>
                                    <button type="button"
                                        class="p-1 bg-purple-100 hover:bg-purple-200 rounded text-purple-700 text-sm">
                                        <i class="fas fa-plus"></i> Add Item
                                    </button>
                                </div>
                                <div class="space-y-3" id="tabItemsContainer">
                                    <div class="border border-slate-200 rounded p-3">
                                        <div class="grid grid-cols-2 gap-3 mb-2">
                                            <div>
                                                <label class="block text-xs font-medium text-slate-700 mb-1">ID</label>
                                                <input type="text"
                                                    class="w-full border-slate-300 focus:border-purple-500 focus:ring-purple-500 rounded-md shadow-sm text-sm">
                                            </div>
                                            <div class="text-right">
                                                <button type="button"
                                                    class="p-1 bg-red-100 hover:bg-red-200 rounded text-red-700 text-sm mt-6">
                                                    <i class="fas fa-trash"></i>
                                                </button>
                                            </div>
                                        </div>
                                        <div class="grid grid-cols-2 gap-3 mb-2">
                                            <div>
                                                <label
                                                    class="block text-xs font-medium text-slate-700 mb-1">Title</label>
                                                <input type="text"
                                                    class="w-full border-slate-300 focus:border-purple-500 focus:ring-purple-500 rounded-md shadow-sm text-sm">
                                            </div>
                                            <div>
                                                <label
                                                    class="block text-xs font-medium text-slate-700 mb-1">Icon</label>
                                                <select
                                                    class="w-full border-slate-300 focus:border-purple-500 focus:ring-purple-500 rounded-md shadow-sm text-sm">
                                                    <option value="Cloud">Cloud</option>
                                                    <option value="Server">Server</option>
                                                    <option value="Shield">Shield</option>
                                                </select>
                                            </div>
                                        </div>
                                        <div>
                                            <label
                                                class="block text-xs font-medium text-slate-700 mb-1">Description</label>
                                            <textarea rows="2"
                                                class="w-full border-slate-300 focus:border-purple-500 focus:ring-purple-500 rounded-md shadow-sm text-sm"></textarea>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Link Editor (hidden by default) -->
                    <div id="linkEditor" class="hidden">
                        <div class="border border-slate-200 rounded-lg p-4">
                            <h6 class="font-medium text-slate-800 mb-3">Link Configuration</h6>
                            <div class="mb-3">
                                <label class="block text-sm font-medium text-slate-700 mb-1">URL</label>
                                <input type="text" name="url"
                                    class="w-full border-slate-300 focus:border-purple-500 focus:ring-purple-500 rounded-md shadow-sm text-sm">
                            </div>
                            <div class="flex items-center mb-3">
                                <input type="checkbox" id="showStatusLink" name="showStatus"
                                    class="h-4 w-4 text-purple-600 focus:ring-purple-500 border-slate-300 rounded">
                                <label for="showStatusLink" class="ml-2 block text-sm text-slate-700">Show Status
                                    Indicator</label>
                            </div>
                            <div id="statusConfigLink" class="mb-3 hidden">
                                <label class="block text-sm font-medium text-slate-700 mb-1">Status</label>
                                <select name="status"
                                    class="w-full border-slate-300 focus:border-purple-500 focus:ring-purple-500 rounded-md shadow-sm text-sm">
                                    <option value="online">Online</option>
                                    <option value="offline">Offline</option>
                                    <option value="maintenance">Maintenance</option>
                                </select>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

@section Scripts {
    <script>
        $(document).ready(function () {
            // Show/hide status selector based on showStatus checkbox
            $("#showStatus, #showStatusLink").change(function () {
                if ($(this).is(":checked")) {
                    $("#statusContainer, #statusConfigLink").removeClass("hidden");
                } else {
                    $("#statusContainer, #statusConfigLink").addClass("hidden");
                }
            });

            // Show the appropriate editor based on menu type selection
            $("#menuType").change(function () {
                const selectedType = $(this).val();

                // Hide all editors
                $("#contentEditorPlaceholder, #megaMenuEditor, #serviceTabsEditor, #linkEditor").addClass("hidden");

                // Show the selected editor
                if (selectedType === "MegaMenu") {
                    $("#megaMenuEditor").removeClass("hidden");
                } else if (selectedType === "ServiceTabs") {
                    $("#serviceTabsEditor").removeClass("hidden");
                } else if (selectedType === "Link") {
                    $("#linkEditor").removeClass("hidden");
                } else if (selectedType === "") {
                    $("#contentEditorPlaceholder").removeClass("hidden");
                }
            });

            // Save menu item
            $("#saveMenuBtn").click(function () {
                // Collect form data
                const formData = $("#menuItemForm").serialize();

                // In a real application, this would send data to the server
                console.log("Saving menu item:", formData);

                // Show success message
                alert("Menu item saved successfully!");
            });
        });
    </script>
}